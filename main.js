!function(){"use strict";class e{constructor(e,t,r,s,o){this._name=t.name,this._link=t.link,this._id=t._id,this._isLiked=t.isLiked,this._cardSelector=e,this.handleCardClick=r,this.handleCardDelete=s,this.handleCardLike=o}_handleLikeButton(){this._cardElement.querySelector(".gallery__like-button").classList.toggle("gallery__like-button_active")}toggleLike(){this._handleLikeButton()}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}deleteCard(){this._handleDeleteButton()}getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".gallery__card").cloneNode(!0),this._cardElement.querySelector(".gallery__title").textContent=this._name,this._cardElement.querySelector(".gallery__image").src=this._link,this._cardElement.querySelector(".gallery__image").alt=this._name,this._cardElement.id=this._id,this._isLiked&&this._cardElement.querySelector(".gallery__like-button").classList.add("gallery__like-button_active"),this._setEventListeners(),this._cardElement}_setEventListeners(){this._cardElement.querySelector(".gallery__like-button").addEventListener("click",(()=>{this.handleCardLike(this)})),this._cardElement.querySelector(".gallery__delete-button").addEventListener("click",(()=>{this.handleCardDelete(this)})),this._cardElement.querySelector(".gallery__image").addEventListener("click",(()=>{this.handleCardClick(this._name,this._link)}))}}var t=class{constructor(e,t){this._formEl=t,this._inputEl=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_setEventListeners(){this._inputEls=Array.from(this._formEl.querySelectorAll(this._inputEl)),this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e,t){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e,t)}toggleButtonState(){let e=!1;if(this._inputEls.forEach((t=>{t.validity.valid||(e=!0)})),e)return this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0;this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}enableValidation(){this._setEventListeners(),this._formEl.addEventListener("submit",(e=>{e.preventDefault()}))}};class r{constructor(e){this._modal=document.querySelector(e),this._closeButton=this._modal.querySelector(".modal__close-button")}openPopup(){this._modal.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}closePopup(){this._modal.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.closePopup()};setEventListeners(){this._modal.addEventListener("mousedown",(e=>{e.target===this._modal&&this.closePopup()})),this._closeButton.addEventListener("click",(()=>{this.closePopup()}))}}class s extends r{constructor(e,t){super(e),this._handleFormSubmit=t,this._submitButton=this._modal.querySelector(".modal__submit-button"),this._formEl=this._modal.querySelector(".modal__form"),this._inputEls=this._formEl.querySelectorAll(".modal__input")}closePopup(){this._formEl.reset(),super.closePopup()}handleButtonLoading(e){this._submitButton.textContent=e?"Saving...":"Save"}_getInputValues(){return this._inputValues={},this._inputEls.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setEventListeners(){this._formEl.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__error_visible",errorClass:"modal__error"},i=document.querySelector("#profile-edit-button"),n=document.querySelector("#profile-edit-modal"),l=(document.querySelector("#modal-edit-close-button"),document.querySelector(".profile__title")),a=document.querySelector(".profile__description"),c=document.querySelector("#profile-title-input"),d=document.querySelector("#profile-description-input"),u=(document.querySelector("#modal-edit-form"),document.querySelector(".profile__image")),h=document.querySelector("#profile-picture-modal"),_=document.querySelector(".profile__edit-image-button"),m=(document.querySelector(".modal__close-button"),document.querySelector("#profile-add-modal")),p=document.querySelector("#profile-add-button"),E=(document.querySelector("#modal-add-form"),document.querySelector("#card-title-input"),document.querySelector("#card-url-input"),document.querySelector("#modal-image-close-button"),document.querySelector(".gallery__cards"),document.querySelector(".gallery__delete-button"),document.querySelector("#confirm-modal"),document.querySelector(".modal-confirm__submit-button"),document.querySelector(".gallery__like-button"),document.querySelector(".modal").querySelector(".modal__submit-button"),new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getProfileData(){return fetch(`${this._baseUrl}/v1/users/me`,{method:"GET",headers:this._headers}).then((e=>this._checkResponse(e)))}getInitialCards(){return fetch(`${this._baseUrl}/v1/cards`,{method:"GET",headers:this._headers}).then((e=>this._checkResponse(e)))}editProfile(e,t){return fetch(`${this._baseUrl}/v1/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((e=>this._checkResponse(e)))}editProfilePic(e){return fetch(`${this._baseUrl}/v1/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponse(e)))}createNewCard(e,t){return fetch(`${this._baseUrl}/v1/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((e=>this._checkResponse(e)))}deleteApiCard(e){return fetch(`${this._baseUrl}/v1/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}addLike(e){return fetch(`${this._baseUrl}/v1/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then((e=>this._checkResponse(e)))}removeLike(e){return fetch(`${this._baseUrl}/v1/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com",headers:{authorization:"177c16b7-240f-4206-a2e5-5bd359c96b1d","Content-Type":"application/json"}})),v=new class extends r{constructor(e){super(e),this._confirmDeleteButton=this._modal.querySelector(".modal-confirm__submit-button"),this._submitButton=this._modal.querySelector(".modal__submit-button")}handleConfirm(e){this._handleConfirmDelete=e}handleButtonLoading(){this._submitButton.textContent="Saving...",setTimeout((()=>{this._submitButton.textContent="Save"}),1e3)}setEventListeners(){this._confirmDeleteButton.addEventListener("click",(()=>{this._handleConfirmDelete()})),super.setEventListeners()}}("#confirm-modal");function y(t){return new e("#card-template",t,B,(function(e){v.openPopup(),v.handleConfirm((function(){v.handleButtonLoading(!0);const r=t._id;E.deleteApiCard(r).then((()=>{e.deleteCard(),v.closePopup(),v.handleButtonLoading(!1)})).catch((e=>(console.error("An error occured:",e),Promise.reject(e))))}))}),(function(e){const r=t._id;!1===t.isLiked?E.addLike(r).then((()=>{e.toggleLike(),t.isLiked=!0})).catch((e=>(console.error("An error occured:",e),Promise.reject(e)))):E.removeLike(r).then((()=>{e.toggleLike(),t.isLiked=!1})).catch((e=>(console.error("An error occured:",e),Promise.reject(e))))})).getTemplate()}v.setEventListeners();const g=new class{constructor(e,t){let{renderer:r}=e;this._renderer=r,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=y(e);g.addItem(t)}},".gallery__cards");E.getInitialCards().then((e=>{g.renderItems(e.reverse())})).catch((e=>(console.error("An error occured:",e),Promise.reject(e))));const f=new t(o,n);f.enableValidation();const b=new t(o,m);b.enableValidation();const S=new t(o,h);S.enableValidation();const L=new class{constructor(e,t,r){this._userTitle=e,this._userDescription=t,this._userAvatar=r}getUserInfo(){return{userTitle:this._userTitle.textContent,userDescription:this._userDescription.textContent}}setUserInfo(e){let{userTitle:t,userDescription:r}=e;this._userTitle.textContent=t,this._userDescription.textContent=r}setUserAvatar(e){this._userAvatar.src=e}}(l,a,u),k=new s("#profile-edit-modal",(e=>{k.handleButtonLoading(!0),E.editProfile(e.name,e.description).then((e=>{L.setUserInfo({userTitle:e.name,userDescription:e.about}),k.closePopup(),k.handleButtonLoading(!1),f.toggleButtonState()})).catch((e=>(console.error("An error occured:",e),Promise.reject(e))))}));k.setEventListeners(),i.addEventListener("click",(()=>{const e=L.getUserInfo();c.value=e.userTitle,d.value=e.userDescription,f.toggleButtonState(),k.openPopup()})),E.getProfileData().then((e=>{L.setUserInfo({userTitle:e.name,userDescription:e.about}),L.setUserAvatar(e.avatar)})).catch((e=>(console.error("An error occured:",e),Promise.reject(e))));const C=new s("#profile-add-modal",(e=>{C.handleButtonLoading(!0),E.createNewCard(e.title,e.link).then((e=>{const t=y(e);g.addItem(t),C.closePopup(),C.handleButtonLoading(!1),b.toggleButtonState()})).catch((e=>(console.error("An error occured:",e),Promise.reject(e))))}));p.addEventListener("click",(()=>{C.openPopup()})),C.setEventListeners();const q=new class extends r{constructor(e){super(e),this._modalImage=this._modal.querySelector(".modal__image-preview"),this._modalImageText=this._modal.querySelector(".modal__image-text")}openPopup(e,t){this._modalImage.src=t,this._modalImage.alt=e,this._modalImageText.textContent=e,super.openPopup()}}("#image-modal");function B(e,t){q.openPopup(e,t)}q.setEventListeners();const P=new s("#profile-picture-modal",(e=>{P.handleButtonLoading(!0),E.editProfilePic(e.link).then((e=>{L.setUserAvatar(e.avatar),P.closePopup(),P.handleButtonLoading(!1),S.toggleButtonState()})).catch((e=>(console.error("An error occured:",e),Promise.reject(e))))}));P.setEventListeners(),_.addEventListener("click",(()=>{S.toggleButtonState(),P.openPopup()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0I4RyxNQUFNMEMsSUFDTE0sRUFBWVcsY0FBY2pCLEVBQUsvQixRQUMvQjZELEVBQXdCdEgsYUFDeEJzSCxFQUF3QjFHLHFCQUFvQixHQUM1Q2lGLEVBQWtDL0csbUJBQW1CLElBRXRENEYsT0FBT0MsSUFDTkMsUUFBUUQsTUFBTSxvQkFBcUJBLEdBQzVCbkMsUUFBUUMsT0FBT2tDLEtBQ3RCLElBSVIyQyxFQUF3QmxILG9CQUV4QnVCLEVBQXlCbkUsaUJBQWlCLFNBQVMsS0FDakRxSSxFQUFrQy9HLG9CQUNsQ3dJLEVBQXdCeEgsV0FBVyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9Db25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGl0ZW1zLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlQ2FyZERlbGV0ZSxcclxuICAgIGhhbmRsZUNhcmRMaWtlXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gaXRlbXMubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBpdGVtcy5saW5rO1xyXG4gICAgdGhpcy5faWQgPSBpdGVtcy5faWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXRlbXMuaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcclxuICAgIHRoaXMuaGFuZGxlQ2FyZExpa2UgPSBoYW5kbGVDYXJkTGlrZTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJnYWxsZXJ5X19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVMaWtlKCkge1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5pZCA9IHRoaXMuX2lkO1xyXG5cclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbGlrZS1idXR0b25cIilcclxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImdhbGxlcnlfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2FyZExpa2UodGhpcyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2RlbGV0ZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYXJkRGVsZXRlKHRoaXMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLmhhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbi8vICAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4vLyAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4vLyAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4vLyAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuLy8gICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuLy8gICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxyXG4vLyB9O1xyXG5cclxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsKSB7XHJcbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWw7XHJcbiAgICB0aGlzLl9pbnB1dEVsID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcztcclxuICB9XHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTZXQgRXZlbnQgTGlzdGVuZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0RWwpKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFNob3cgRXJyb3IgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSGlkZSBFcnJvciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ2hlY2sgVmFsaWRpdHkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsLCB2YWxpZGF0aW9uQ29uZmlnKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBUb2dnbGUgU3VibWl0IEJ1dHRvbiBJbmFjdGl2ZS9BY3RpdmUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgbGV0IGZvdW5kSW52YWxpZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICBmb3VuZEludmFsaWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZm91bmRJbnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICByZXR1cm4gKHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVuYWJsZS9SZXNldCBWYWxpZGF0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX21vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlblBvcHVwKCkge1xyXG4gICAgdGhpcy5fbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLl9tb2RhbCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XHJcbiAgICB0aGlzLl9mb3JtRWwgPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZVBvcHVwKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZVBvcHVwKCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVCdXR0b25Mb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gREFUQSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxyXG59O1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBPUEVOL0NMT1NFIFBPUFVQIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8qZnVuY3Rpb24gb3BlblBvcHVwKG1vZGFsKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZVdpdGhFc2MpO1xyXG59Ki9cclxuXHJcbi8qXHJcbmZ1bmN0aW9uIGNsb3NlUG9wdXAobW9kYWwpIHtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlV2l0aEVzYyk7XHJcbn1cclxuKi9cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDTE9TRSBXSVRIIEVTQyBLRVkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4vKlxyXG5mdW5jdGlvbiBjbG9zZVdpdGhFc2MoZXZ0KSB7XHJcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XHJcbiAgICBjbG9zZVBvcHVwKG9wZW5lZFBvcHVwKTtcclxuICB9XHJcbn1cclxuKi9cclxuXHJcbmV4cG9ydCB7IHZhbGlkYXRpb25Db25maWcgfTtcclxuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQVRBICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuZXhwb3J0IGNvbnN0IGNhcmREYXRhID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVkFSSUFCTEVTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFRElUIFBST0ZJTEUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsRWRpdENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNtb2RhbC1lZGl0LWNsb3NlLWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZWRpdC1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBpY3R1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBpY3R1cmVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1waWN0dXJlLW1vZGFsXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0UGljdHVyZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1pbWFnZS1idXR0b25cIlxyXG4pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQUREIENBUkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtYWRkLWZvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10aXRsZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRVcmxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC11cmwtaW5wdXRcIik7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUFJFVklFVyBDQVJEIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IG1vZGFsSW1hZ2VDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjbW9kYWwtaW1hZ2UtY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEdSSUQvQ0FSRFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGdhbGxlcnlMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xyXG5leHBvcnQgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZ2FsbGVyeV9fZGVsZXRlLWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbmZpcm0tbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBjb25maXJtRGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbC1jb25maXJtX19zdWJtaXQtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaWtlSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbGlrZS1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XHJcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTVBPUlRTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICNDTEFTU0VTIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL2NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICNWQVJJQUJMRVMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gVVRJTFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmltcG9ydCB7IHZhbGlkYXRpb25Db25maWcgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFRElUIFBST0ZJTEUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmltcG9ydCB7XHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZUVkaXRNb2RhbCxcclxuICBwcm9maWxlVGl0bGUsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIHByb2ZpbGVQaWN0dXJlLFxyXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEFERCBDQVJEIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmltcG9ydCB7IHByb2ZpbGVBZGRNb2RhbCwgcHJvZmlsZUFkZEJ1dHRvbiB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ0hBTkdFIFBST0ZJTEUgUElDVFVSRSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmltcG9ydCB7XHJcbiAgcHJvZmlsZVBpY3R1cmVNb2RhbCxcclxuICBwcm9maWxlRWRpdFBpY3R1cmVCdXR0b24sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBNb2RhbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuaW1wb3J0IHsgc3VibWl0QnV0dG9uIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlVOQ1RJT05TICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IG5ld0FwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb21cIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjE3N2MxNmI3LTI0MGYtNDIwNi1hMmU1LTViZDM1OWM5NmIxZFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBjb25maXJtUG9wdXAgPSBuZXcgUG9wdXBDb25maXJtKFwiI2NvbmZpcm0tbW9kYWxcIik7XHJcblxyXG5jb25maXJtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbXMpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBpdGVtcyxcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIGZ1bmN0aW9uIChjYXJkKSB7XHJcbiAgICAgIGNvbmZpcm1Qb3B1cC5vcGVuUG9wdXAoKTtcclxuICAgICAgY29uZmlybVBvcHVwLmhhbmRsZUNvbmZpcm0oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbmZpcm1Qb3B1cC5oYW5kbGVCdXR0b25Mb2FkaW5nKHRydWUpO1xyXG4gICAgICAgIGNvbnN0IGNhcmRJZCA9IGl0ZW1zLl9pZDtcclxuICAgICAgICBuZXdBcGlcclxuICAgICAgICAgIC5kZWxldGVBcGlDYXJkKGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1Qb3B1cC5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1Qb3B1cC5oYW5kbGVCdXR0b25Mb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBbiBlcnJvciBvY2N1cmVkOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZnVuY3Rpb24gKGNhcmQpIHtcclxuICAgICAgY29uc3QgY2FyZElkID0gaXRlbXMuX2lkO1xyXG4gICAgICBpZiAoaXRlbXMuaXNMaWtlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICBuZXdBcGlcclxuICAgICAgICAgIC5hZGRMaWtlKGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY2FyZC50b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgICAgIGl0ZW1zLmlzTGlrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VyZWQ6XCIsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5ld0FwaVxyXG4gICAgICAgICAgLnJlbW92ZUxpa2UoY2FyZElkKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLnRvZ2dsZUxpa2UoKTtcclxuICAgICAgICAgICAgaXRlbXMuaXNMaWtlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VyZWQ6XCIsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdldFRlbXBsYXRlKCk7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5TVEFOVElBVElORyBDTEFTU0VTICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTRUNUSU9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IGhvbWVTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChpdGVtcykgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbXMpO1xyXG4gICAgICBob21lU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5nYWxsZXJ5X19jYXJkc1wiXHJcbik7XHJcblxyXG5uZXdBcGlcclxuICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgaG9tZVNlY3Rpb24ucmVuZGVySXRlbXMoZGF0YS5yZXZlcnNlKCkpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VyZWQ6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgfSk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBGT1JNIFZBTElEQVRPUiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIHByb2ZpbGVFZGl0TW9kYWxcclxuKTtcclxuXHJcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgcHJvZmlsZUFkZE1vZGFsXHJcbik7XHJcblxyXG5hZGRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBjaGFuZ2VQcm9maWxlUGljdHVyZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIHByb2ZpbGVQaWN0dXJlTW9kYWxcclxuKTtcclxuXHJcbmNoYW5nZVByb2ZpbGVQaWN0dXJlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBVU0VSIElORk8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCB1c2VyUHJvZmlsZSA9IG5ldyBVc2VySW5mbyhcclxuICBwcm9maWxlVGl0bGUsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxyXG4gIHByb2ZpbGVQaWN0dXJlXHJcbik7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVESVQgUFJPRklMRSBNT0RBTC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gICAgZWRpdFByb2ZpbGVNb2RhbC5oYW5kbGVCdXR0b25Mb2FkaW5nKHRydWUpO1xyXG4gICAgbmV3QXBpXHJcbiAgICAgIC5lZGl0UHJvZmlsZShpbnB1dFZhbHVlcy5uYW1lLCBpbnB1dFZhbHVlcy5kZXNjcmlwdGlvbilcclxuICAgICAgLnRoZW4oKG5ld1Byb2ZpbGVEYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8oe1xyXG4gICAgICAgICAgdXNlclRpdGxlOiBuZXdQcm9maWxlRGF0YS5uYW1lLFxyXG4gICAgICAgICAgdXNlckRlc2NyaXB0aW9uOiBuZXdQcm9maWxlRGF0YS5hYm91dCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBlZGl0UHJvZmlsZU1vZGFsLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICBlZGl0UHJvZmlsZU1vZGFsLmhhbmRsZUJ1dHRvbkxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VyZWQ6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5lZGl0UHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJJbmZvID0gdXNlclByb2ZpbGUuZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLnVzZXJUaXRsZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJJbmZvLnVzZXJEZXNjcmlwdGlvbjtcclxuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuUG9wdXAoKTtcclxufSk7XHJcblxyXG5uZXdBcGlcclxuICAuZ2V0UHJvZmlsZURhdGEoKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICB1c2VyUHJvZmlsZS5zZXRVc2VySW5mbyh7XHJcbiAgICAgIHVzZXJUaXRsZTogZGF0YS5uYW1lLFxyXG4gICAgICB1c2VyRGVzY3JpcHRpb246IGRhdGEuYWJvdXQsXHJcbiAgICB9KTtcclxuICAgIHVzZXJQcm9maWxlLnNldFVzZXJBdmF0YXIoZGF0YS5hdmF0YXIpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VyZWQ6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgfSk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBBREQgQ0FSRCBNT0RBTCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IGFkZFByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsXHJcbiAgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICBhZGRQcm9maWxlTW9kYWwuaGFuZGxlQnV0dG9uTG9hZGluZyh0cnVlKTtcclxuICAgIG5ld0FwaVxyXG4gICAgICAuY3JlYXRlTmV3Q2FyZChpbnB1dFZhbHVlcy50aXRsZSwgaW5wdXRWYWx1ZXMubGluaylcclxuICAgICAgLnRoZW4oKG5ld0NhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKG5ld0NhcmREYXRhKTtcclxuICAgICAgICBob21lU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgICBhZGRQcm9maWxlTW9kYWwuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIGFkZFByb2ZpbGVNb2RhbC5oYW5kbGVCdXR0b25Mb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBhZGRQcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VyZWQ6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkUHJvZmlsZU1vZGFsLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuXHJcbmFkZFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBJTUFHRSBQUkVWSUVXIE1PREFMIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBpbWFnZVByZXZpZXdNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XHJcbiAgaW1hZ2VQcmV2aWV3TW9kYWwub3BlblBvcHVwKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5pbWFnZVByZXZpZXdNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRURJVCBQUk9GSUxFIFBJQ1RVUkUgTU9EQUwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgZWRpdFByb2ZpbGVQaWN0dXJlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLXBpY3R1cmUtbW9kYWxcIixcclxuICAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgIGVkaXRQcm9maWxlUGljdHVyZU1vZGFsLmhhbmRsZUJ1dHRvbkxvYWRpbmcodHJ1ZSk7XHJcbiAgICBuZXdBcGlcclxuICAgICAgLmVkaXRQcm9maWxlUGljKGlucHV0VmFsdWVzLmxpbmspXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVQaWN0dXJlTW9kYWwuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIGVkaXRQcm9maWxlUGljdHVyZU1vZGFsLmhhbmRsZUJ1dHRvbkxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIGNoYW5nZVByb2ZpbGVQaWN0dXJlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VyZWQ6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5lZGl0UHJvZmlsZVBpY3R1cmVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZUVkaXRQaWN0dXJlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2hhbmdlUHJvZmlsZVBpY3R1cmVGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgZWRpdFByb2ZpbGVQaWN0dXJlTW9kYWwub3BlblBvcHVwKCk7XHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFggLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKCFyZXMub2spIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9maWxlRGF0YSgpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS92MS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS92MS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVkaXRQcm9maWxlKHByb2ZpbGVOYW1lLCBwcm9maWxlQWJvdXQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS92MS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBwcm9maWxlTmFtZSxcclxuICAgICAgICBhYm91dDogcHJvZmlsZUFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZVBpYyhuZXdBdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS92MS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBuZXdBdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZU5ld0NhcmQoY2FyZE5hbWUsIGNhcmRMaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdjEvY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkTmFtZSxcclxuICAgICAgICBsaW5rOiBjYXJkTGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQXBpQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS92MS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3YxL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdjEvY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2NvbmZpcm1EZWxldGVCdXR0b24gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbC1jb25maXJtX19zdWJtaXQtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ29uZmlybShhY3Rpb24pIHtcclxuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1EZWxldGUgPSBhY3Rpb247XHJcbiAgfVxyXG5cclxuICBoYW5kbGVCdXR0b25Mb2FkaW5nKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jb25maXJtRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1EZWxldGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGNhcmRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyVGl0bGVFbCwgdXNlckRlc2NyaXB0aW9uRWwsIHVzZXJBdmF0YXJFbCkge1xyXG4gICAgdGhpcy5fdXNlclRpdGxlID0gdXNlclRpdGxlRWw7XHJcbiAgICB0aGlzLl91c2VyRGVzY3JpcHRpb24gPSB1c2VyRGVzY3JpcHRpb25FbDtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSB1c2VyQXZhdGFyRWw7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJUaXRsZVZhbHVlID0gdGhpcy5fdXNlclRpdGxlLnRleHRDb250ZW50O1xyXG4gICAgY29uc3QgdXNlckRlc2NyaXB0aW9uVmFsdWUgPSB0aGlzLl91c2VyRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlclRpdGxlOiB1c2VyVGl0bGVWYWx1ZSxcclxuICAgICAgdXNlckRlc2NyaXB0aW9uOiB1c2VyRGVzY3JpcHRpb25WYWx1ZSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IHVzZXJUaXRsZSwgdXNlckRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX3VzZXJUaXRsZS50ZXh0Q29udGVudCA9IHVzZXJUaXRsZTtcclxuICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHVzZXJEZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIodXNlckF2YXRhcikge1xyXG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSB1c2VyQXZhdGFyO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKG1vZGFsU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbW9kYWxJbWFnZSA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXByZXZpZXdcIik7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlVGV4dCA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXRleHRcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuUG9wdXAobmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5fbW9kYWxJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fbW9kYWxJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fbW9kYWxJbWFnZVRleHQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlblBvcHVwKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJjYXJkU2VsZWN0b3IiLCJpdGVtcyIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJoYW5kbGVDYXJkTGlrZSIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfaXNMaWtlZCIsImlzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwidG9nZ2xlTGlrZSIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJyZW1vdmUiLCJkZWxldGVDYXJkIiwiZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsImlkIiwiYWRkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbGlkYXRpb25Db25maWciLCJmb3JtRWwiLCJfZm9ybUVsIiwiX2lucHV0RWwiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0RWxzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXRFbCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZm91bmRJbnZhbGlkIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJtb2RhbFNlbGVjdG9yIiwiX21vZGFsIiwiX2Nsb3NlQnV0dG9uIiwib3BlblBvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2VQb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImV2ZW50IiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwicmVzZXQiLCJoYW5kbGVCdXR0b25Mb2FkaW5nIiwiaXNMb2FkaW5nIiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlUGljdHVyZSIsInByb2ZpbGVQaWN0dXJlTW9kYWwiLCJwcm9maWxlRWRpdFBpY3R1cmVCdXR0b24iLCJwcm9maWxlQWRkTW9kYWwiLCJwcm9maWxlQWRkQnV0dG9uIiwibmV3QXBpIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFByb2ZpbGVEYXRhIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwiZWRpdFByb2ZpbGUiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVBYm91dCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJlZGl0UHJvZmlsZVBpYyIsIm5ld0F2YXRhciIsImF2YXRhciIsImNyZWF0ZU5ld0NhcmQiLCJjYXJkTmFtZSIsImNhcmRMaW5rIiwiZGVsZXRlQXBpQ2FyZCIsImNhcmRJZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiYXV0aG9yaXphdGlvbiIsImNvbmZpcm1Qb3B1cCIsIl9jb25maXJtRGVsZXRlQnV0dG9uIiwiaGFuZGxlQ29uZmlybSIsImFjdGlvbiIsIl9oYW5kbGVDb25maXJtRGVsZXRlIiwic2V0VGltZW91dCIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJob21lU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJjYXJkRWxlbWVudCIsInByZXBlbmQiLCJkYXRhIiwicmV2ZXJzZSIsImVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRQcm9maWxlRm9ybVZhbGlkYXRvciIsImNoYW5nZVByb2ZpbGVQaWN0dXJlRm9ybVZhbGlkYXRvciIsInVzZXJQcm9maWxlIiwidXNlclRpdGxlRWwiLCJ1c2VyRGVzY3JpcHRpb25FbCIsInVzZXJBdmF0YXJFbCIsIl91c2VyVGl0bGUiLCJfdXNlckRlc2NyaXB0aW9uIiwiX3VzZXJBdmF0YXIiLCJnZXRVc2VySW5mbyIsInVzZXJUaXRsZSIsInVzZXJEZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsInVzZXJBdmF0YXIiLCJlZGl0UHJvZmlsZU1vZGFsIiwiaW5wdXRWYWx1ZXMiLCJkZXNjcmlwdGlvbiIsIm5ld1Byb2ZpbGVEYXRhIiwidXNlckluZm8iLCJhZGRQcm9maWxlTW9kYWwiLCJ0aXRsZSIsIm5ld0NhcmREYXRhIiwiaW1hZ2VQcmV2aWV3TW9kYWwiLCJfbW9kYWxJbWFnZSIsIl9tb2RhbEltYWdlVGV4dCIsImVkaXRQcm9maWxlUGljdHVyZU1vZGFsIl0sInNvdXJjZVJvb3QiOiIifQ==